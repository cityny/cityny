- name: Write to README
        shell: python
        run: |
          import os
          
          # 1. Capturamos la lista desde los outputs
          repo_list = """${{ steps.repo_data.outputs.repoList }}"""
          
          # 2. Leemos el README actual
          with open("README.md", "r", encoding="utf-8") as f:
            content = f.read()
          
          # 3. Tus etiquetas personalizadas
          start_tag = "--inicio--"
          end_tag = "--final--"
          
          # 4. Reconstrucción del archivo
          if start_tag in content and end_tag in content:
              pre = content.split(start_tag)[0]
              post = content.split(end_tag)[1]
              new_content = f"{pre}{start_tag}\n{repo_list}\n{end_tag}{post}"
              
              with open("README.md", "w", encoding="utf-8") as f:
                  f.write(new_content)
              print("README actualizado con éxito.")
          else:
              print(f"Error: No se encontró {start_tag} o {end_tag} en el README.")
              exit(1)
